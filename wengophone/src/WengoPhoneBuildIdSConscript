env = WengoGetEnvironment()

WengoPhoneBuildIdTemplate = """
#include "WengoPhoneBuildId.h"
const unsigned long long WengoPhoneBuildId::BUILDID = %(buildId)uULL;
const char * WengoPhoneBuildId::VERSION = "%(version)s";
const unsigned long long WengoPhoneBuildId::REVISION = %(revision)uULL;
const char * WengoPhoneBuildId::SOFTPHONE_NAME = "%(sofphoneName)s";
const char * WengoPhoneBuildId::COPYRIGHT = "%(copyright)s";
const char * WengoPhoneBuildId::LICENSE = "%(license)s";
const char * WengoPhoneBuildId::DESCRIPTION = "%(description)s";
"""

WengoPhoneBuildId = {
	'buildId': WengoGetCurrentDateTime(),
	'version': '0.13',
	'revision': WengoGetSubversionRevision(),
	'sofphoneName': 'wengo',

	'copyright': 'Copyright (C) 2004-2006 Wengo  http://openwengo.com',

	'license': 'This program is free software; you can redistribute it and/or\\n'\
			'modify it under the terms of the GNU General Public License\\n'\
			'as published by the Free Software Foundation; either version 2\\n'\
			'of the License, or (at your option) any later version.',

	'description': 'WengoPhone is a VoIP application',
}

WengoSetVariable('WengoPhoneBuildId', WengoPhoneBuildId)

#If you don't want WengoPhoneBuildIdFile to be generated
#uncomment this line and comment the other one
#If you do so, never ever commit this file!
#WengoPhoneBuildIdFile = 'WengoPhoneBuildId.cpp'

#Generates WengoPhoneBuildIdFile with proper buildId number and svn revision
WengoPhoneBuildIdFile = env.WengoCreateFile('WengoPhoneBuildId.cpp', WengoPhoneBuildIdTemplate, WengoPhoneBuildId)

WengoSetVariable('WengoPhoneBuildIdFile', WengoPhoneBuildIdFile)
