env = WengoGetEnvironment()

libs = [
	'avutil'
]

includes = [
	'libavcodec'
]

env.WengoAddIncludePath(includes)
env.WengoUseLibraries(libs)

configure_command = './configure'

if WengoOSMacOSX():
	configure_command += ' --extra-cflags=-fno-common --extra-ldflags=-fno-common'

	if WengoArchX86():
		configure_command += '--disable-mmx --enable-memalign-hack'

env.WengoAutoconf('avcodec', ['libavcodec/libavcodec.a'],
	configure_command, 'cd libavcodec && make',
	['configure'], ['config.mak'])


