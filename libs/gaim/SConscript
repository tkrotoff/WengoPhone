import os

env = WengoGetEnvironment()

defines = {}

sources = []

libs = [
	'gnutls',
	'glib-2.0',
	'gthread-2.0',
]

lib_path = []

include_path = [
	'/sw/include',
	'include'
]

libs_file = []

"""
if WengoOSWindows():
	if WengoCCMSVC():
		lib_path += [
			'binary-lib/msvc',
		]

		include_path += [
			'include',
		]

		libs_file += [
			'binary-lib/msvc/gaim.lib',
			'binary-lib/msvc/gaim.dll',
			'binary-lib/msvc/iconv.dll',
			'binary-lib/msvc/intl.dll',
			'binary-lib/msvc/nspr4.dll',
			'binary-lib/msvc/nss3.dll',
			'binary-lib/msvc/nssckbi.dll',
			'binary-lib/msvc/plc4.dll',
			'binary-lib/msvc/plds4.dll',
			'binary-lib/msvc/softokn3.dll',
			'binary-lib/msvc/ssl3.dll',
			'binary-lib/msvc/zlib1.dll',
		]

elif WengoOSMacOSX():
"""

include_path += [
	'.',
	'src',
	'src/protocols/oscar/'
]

defines['HAVE_CONFIG_H'] = 1
defines['HAVE_GLIB'] = 1
defines['GAIM_STATIC_PRPL'] = 1
defines['HAVE_SSL'] = 1
defines['HAVE_GNUTLS'] = 1

sources += [
	'src/account.c',
	'src/accountopt.c',
	'src/blist.c',
	'src/buddyicon.c',
	'src/cipher.c',
	'src/cmds.c',
	'src/connection.c',
	'src/conversation.c',
	'src/core.c',
	'src/debug.c',
	'src/desktopitem.c',
	'src/dnssrv.c',
	'src/eventloop.c',
	'src/ft.c',
	'src/gaim_buffer.c',
	'src/getopt.c',
	'src/getopt1.c',
	'src/idle.c',
	'src/imgstore.c',
	'src/log.c',
	'src/media.c',
	'src/mime.c',
	'src/network.c',
	'src/notify.c',
	'src/ntlm.c',
	'src/plugin.c',
	'src/pluginpref.c',
	'src/pounce.c',
	'src/prefix.c',
	'src/prefs.c',
	'src/privacy.c',
	'src/proxy.c',
	'src/prpl.c',
	'src/request.c',
	'src/roomlist.c',
	'src/savedstatuses.c',
	'src/server.c',
	'src/signals.c',
	'src/sound.c',
	'src/sslconn.c',
	'src/status.c',
	'src/stringref.c',
	'src/stun.c',
	'src/upnp.c',
	'src/util.c',
	'src/value.c',
	'src/whiteboard.c',
	'src/xmlnode.c',
	'plugins/ssl/ssl.c',
#	'plugins/ssl/ssl-nss.c',
	'plugins/ssl/ssl-gnutls.c',
#	'plugins/tcl/tcl.c',
#	'plugins/tcl/tcl_cmds.c',
#	'plugins/tcl/tcl_signals.c',
#	'plugins/tcl/tcl_glib.c',
	'src/protocols/irc/cmds.c',
	'src/protocols/irc/dcc_send.c',
	'src/protocols/irc/irc.c',
	'src/protocols/irc/msgs.c',
	'src/protocols/irc/parse.c',
	'src/protocols/jabber/auth.c',
	'src/protocols/jabber/buddy.c',
	'src/protocols/jabber/chat.c',
	'src/protocols/jabber/disco.c',
	'src/protocols/jabber/iq.c',
	'src/protocols/jabber/jabber.c',
	'src/protocols/jabber/jutil.c',
	'src/protocols/jabber/message.c',
	'src/protocols/jabber/oob.c',
	'src/protocols/jabber/parser.c',
	'src/protocols/jabber/presence.c',
	'src/protocols/jabber/roster.c',
	'src/protocols/jabber/si.c',
	'src/protocols/jabber/xdata.c',
	'src/protocols/msn/cmdproc.c',
	'src/protocols/msn/command.c',
	'src/protocols/msn/dialog.c',
	'src/protocols/msn/directconn.c',
	'src/protocols/msn/error.c',
	'src/protocols/msn/group.c',
	'src/protocols/msn/history.c',
	'src/protocols/msn/httpconn.c',
	'src/protocols/msn/msg.c',
	'src/protocols/msn/msn.c',
	'src/protocols/msn/nexus.c',
	'src/protocols/msn/notification.c',
	'src/protocols/msn/object.c',
	'src/protocols/msn/page.c',
	'src/protocols/msn/servconn.c',
	'src/protocols/msn/session.c',
	'src/protocols/msn/slp.c',
	'src/protocols/msn/slpcall.c',
	'src/protocols/msn/slplink.c',
	'src/protocols/msn/slpmsg.c',
	'src/protocols/msn/slpsession.c',
	'src/protocols/msn/state.c',
	'src/protocols/msn/switchboard.c',
	'src/protocols/msn/sync.c',
	'src/protocols/msn/table.c',
	'src/protocols/msn/transaction.c',
	'src/protocols/msn/user.c',
	'src/protocols/msn/userlist.c',
	'src/protocols/msn/utils.c',
	'src/protocols/napster/napster.c',
	'src/protocols/novell/nmconference.c',
	'src/protocols/novell/nmconn.c',
	'src/protocols/novell/nmcontact.c',
	'src/protocols/novell/nmevent.c',
	'src/protocols/novell/nmfield.c',
	'src/protocols/novell/nmmessage.c',
	'src/protocols/novell/nmrequest.c',
	'src/protocols/novell/nmrtf.c',
	'src/protocols/novell/nmuser.c',
	'src/protocols/novell/nmuserrecord.c',
	'src/protocols/novell/novell.c',
	'src/protocols/oscar/bstream.c',
	'src/protocols/oscar/conn.c',
	'src/protocols/oscar/family_admin.c',
	'src/protocols/oscar/family_advert.c',
	'src/protocols/oscar/family_alert.c',
	'src/protocols/oscar/family_auth.c',
	'src/protocols/oscar/family_bart.c',
	'src/protocols/oscar/family_bos.c',
	'src/protocols/oscar/family_buddy.c',
	'src/protocols/oscar/family_chat.c',
	'src/protocols/oscar/family_chatnav.c',
	'src/protocols/oscar/family_feedbag.c',
	'src/protocols/oscar/family_icbm.c',
	'src/protocols/oscar/family_icq.c',
	'src/protocols/oscar/family_invite.c',
	'src/protocols/oscar/family_locate.c',
	'src/protocols/oscar/family_odir.c',
	'src/protocols/oscar/family_oservice.c',
	'src/protocols/oscar/family_popup.c',
	'src/protocols/oscar/family_stats.c',
	'src/protocols/oscar/family_translate.c',
	'src/protocols/oscar/family_userlookup.c',
	'src/protocols/oscar/misc.c',
	'src/protocols/oscar/msgcookie.c',
	'src/protocols/oscar/oscar.c',
	'src/protocols/oscar/peer.c',
	'src/protocols/oscar/rxhandlers.c',
	'src/protocols/oscar/rxqueue.c',
	'src/protocols/oscar/session.c',
	'src/protocols/oscar/snac.c',
	'src/protocols/oscar/tlv.c',
	'src/protocols/oscar/txqueue.c',
	'src/protocols/oscar/util.c',
	'src/protocols/yahoo/util.c',
	'src/protocols/yahoo/yahoo.c',
	'src/protocols/yahoo/yahoo_auth.c',
	'src/protocols/yahoo/yahoo_crypt.c',
	'src/protocols/yahoo/yahoo_doodle.c',
	'src/protocols/yahoo/yahoo_filexfer.c',
	'src/protocols/yahoo/yahoo_friend.c',
	'src/protocols/yahoo/yahoo_packet.c',
	'src/protocols/yahoo/yahoo_picture.c',
	'src/protocols/yahoo/yahoo_profile.c',
	'src/protocols/yahoo/yahoochat.c',
	'src/protocols/yahoo/ycht.c',
]

if WengoOSMacOSX():
	libs += [
		'resolv'
		]

if WengoOSPosix():
	env.ParseConfig('pkg-config --cflags --libs gthread-2.0')

env.WengoAddDefines(defines)
env.WengoAddLibPath(lib_path)
env.WengoAddIncludePath(include_path)
env.WengoUseLibraries(libs)

env.WengoStaticLibrary('gaim', sources)
